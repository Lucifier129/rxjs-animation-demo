{"version":3,"sources":["hooks/useColorList/colors.ts","hooks/useColorList/index.ts","rxjs-animation/frame.ts","rxjs-animation/duration.ts","rxjs-animation/easing.ts","rxjs-animation/Movable.ts","rxjs-animation/MovableList.ts","rxjs-animation/DOM.ts","demos/Vertical.tsx","demos/Horizontal.tsx","demos/Grid.tsx","demos/Canvas.tsx","App.tsx","index.tsx"],"names":["getRandomColor","index","Math","floor","random","colors","length","useColorList","amount","useState","Array","fill","map","subscriberInfoList","isStarted","requestId","tick","list","currentTime","Date","now","i","subscriber","startTime","next","requestAnimationFrame","frame","Observable","subscriberInfo","push","indexOf","splice","cancelAnimationFrame","Duration","duration","pipe","elapsed","takeWhile","n","easeInQuad","t","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","DOUBLE_PI","ASIN_1","asin","ev1","easeInElastic","ev2","easeOutElastic","ev3","easeInOutElastic","x","m","s","easeInBack","easeOutBack","easeInOutBack","s1","acc","easeInBounce","easeOutBounce","easeInOutBounce","Movable","initialPosition","y","positionSubject","Subject","interactionPositionSubject","moveToSubject","animateToSubject","startingSubject","movingSubject","endingSubject","animationStartSubject","animationEndSubject","movementStartSubject","movementEndSubject","position$","startWith","shareReplay","interactionPosition$","moveTo$","asObservable","animateTo$","starting$","tap","moving$","ending$","animationStart$","animationEnd$","movementStart$","movementEnd$","moveToPosition$","position","movingPosition$","switchMap","startPosition","takeUntil","pairwise","prev","curr","withLatestFrom","offset","currentPosition","animatingPosition$","options","prevPosition","startX","startY","diffX","diffY","isStart","easing","currentDuration","complete","animationStartPosition$","animationEndPosition$","movementStartPosition$","movementEndPosition$","start","move","end","moveTo","animateTo","easingFn","Easing","actions","state$","merge","type","isMoving","isAnimating","info","interationPosition","publish","refCount","defaultMargin","top","bottom","left","right","createHorizontalLayout","spacing","sizeList","rectList","latestX","item","rect","width","height","createVerticalLayout","latestY","createGridLayout","columnCount","margin","columnIndex","rowIndex","isEqualRect","leftRect","rightRect","isEqualWidth","isEqualHeight","isEqualX","isEqualY","isEnterX","isEnterY","isEnterArea","StaticMovableList","layout","mode","Error","createLayout","widthList","heightList","keyList","createSizeList","isEnter","createEnterPredicateFn","originKeyList","useExchanged","latestMovableInfoList","animationOptions","disable","animation","moverMap","key","mover","createMoverMap","moverList","Object","values","getMover","getCurrentRect","getActiveInfo","targetPosition","targetIndex","targetInfo","currentRect","combineLatest","movableInfoList","size","activeItem","find","activeKey","layoutInfo","enteredIndex","findIndex","enteredKey","activeIndex","newKeyList","newSizeList","activeSize","enteredSize","max","layoutByPosition","newRectList","oldKeyList","oldRectList","newRect","oldRect","sortedList","createDragable","elem","handleMouseDown","event","handleMouseMove","onMove","pageX","pageY","document","addEventListener","handleMouseUp","onEnd","removeEventListener","onStart","handleTouchStart","cancelable","preventDefault","touchEvent","touches","latestTouch","handleTouchMove","touch","handleTouchEnd","listen","unlisten","VerticalDemo","containerRef","useRef","colorList","useMemo","useEffect","current","container","containerRect","getBoundingClientRect","_","toString","movableList","subscription","subscribe","child","children","Number","style","zIndex","display","transform","handlers","handler","unsubscribe","forEach","ref","color","lineHeight","textAlign","background","userSelect","HorizontalDemo","GridDemo","from","CanvasDemo","canvasRef","canvas","ctx","getContext","renderItem","fillStyle","fillRect","renderRect","movingItem","animatingItems","clearRect","currentKey","activeInfo","window","innerWidth","innerHeight","modeList","App","currentMode","setMode","paddingTop","paddingBottom","Fragment","onClick","ReactDOM","render","StrictMode","getElementById"],"mappings":"6jDAAaA,EAAiB,WAC5B,IAAIC,EAAQC,KAAKC,MAAMD,KAAKE,SAAWC,EAAOC,QAC9C,OAAOD,EAAOJ,IAGHI,EAAS,CACpB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UAC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","file":"static/js/main.d74d4939.chunk.js","sourcesContent":["export const getRandomColor = () => {\r\n  let index = Math.floor(Math.random() * colors.length);\r\n  return colors[index];\r\n};\r\n\r\nexport const colors = [\r\n  \"#9DC8C8\",\r\n  \"#58C9B9\",\r\n  \"#519D9E\",\r\n  \"#D1B6E1\",\r\n  \"#FFEEE4\",\r\n  \"#F17F42\",\r\n  \"#CE6D39\",\r\n  \"#000000\",\r\n  \"#30A9DE\",\r\n  \"#EFDC05\",\r\n  \"#E53A40\",\r\n  \"#090707\",\r\n  \"#A593E0\",\r\n  \"#E0E3DA\",\r\n  \"#FFFFF3\",\r\n  \"#566270\",\r\n  \"#F6B352\",\r\n  \"#F68657\",\r\n  \"#383A3F\",\r\n  \"#1F2124\",\r\n  \"#D7FFF1\",\r\n  \"#8CD790\",\r\n  \"#77AF9C\",\r\n  \"#285943\",\r\n  \"#D499B9\",\r\n  \"#9055A2\",\r\n  \"#2E294E\",\r\n  \"#011638\",\r\n  \"#FBFFB9\",\r\n  \"#FDD692\",\r\n  \"#EC7357\",\r\n  \"#754F44\",\r\n  \"#C5E99B\",\r\n  \"#8FBC94\",\r\n  \"#548687\",\r\n  \"#56445D\",\r\n  \"#E71D36\",\r\n  \"#2EC4B6\",\r\n  \"#EFFFE9\",\r\n  \"#011627\",\r\n  \"#DE6449\",\r\n  \"#791E94\",\r\n  \"#FFFFF2\",\r\n  \"#41D3BD\",\r\n  \"#5CAB7D\",\r\n  \"#5A9367\",\r\n  \"#44633F\",\r\n  \"#3F4B3B\",\r\n  \"#FFBC42\",\r\n  \"#D81159\",\r\n  \"#8F2D56\",\r\n  \"#218380\",\r\n  \"#E3E36A\",\r\n  \"#C16200\",\r\n  \"#881600\",\r\n  \"#49010F\",\r\n  \"#379392\",\r\n  \"#4FB0C6\",\r\n  \"#4F86C6\",\r\n  \"#6C49B8\",\r\n  \"#67D5B5\",\r\n  \"#EE7785\",\r\n  \"#C89EC4\",\r\n  \"#84B1ED\",\r\n  \"#F16B6F\",\r\n  \"#C5C6B6\",\r\n  \"#AACD6E\",\r\n  \"#3C3530\",\r\n  \"#77AAAD\",\r\n  \"#6E7783\",\r\n  \"#D8E6E7\",\r\n  \"#9DC3C1\",\r\n  \"#AF4034\",\r\n  \"#3E4348\",\r\n  \"#C65146\",\r\n  \"#EC6A5C\",\r\n  \"#F7AA97\",\r\n  \"#ED9282\",\r\n  \"#DE7E73\",\r\n  \"#CFAA9E\",\r\n  \"#D4DFE6\",\r\n  \"#8EC0E4\",\r\n  \"#CADBE9\",\r\n  \"#6AAFE6\",\r\n  \"#D09E88\",\r\n  \"#FADAD8\",\r\n  \"#534847\",\r\n  \"#9B8281\",\r\n  \"#F0E5DE\",\r\n  \"#ABD0CE\",\r\n  \"#7C7877\",\r\n  \"#D9D4CF\",\r\n  \"#AAABD3\",\r\n  \"#CBA6C3\",\r\n  \"#F8FAFF\",\r\n  \"#353866\",\r\n  \"#75D701\",\r\n  \"#F8F8FF\",\r\n  \"#56A902\",\r\n  \"#3B4E32\",\r\n  \"#a5dff9\",\r\n  \"#ef5285\",\r\n  \"#60c5ba\",\r\n  \"#feee7d\",\r\n  \"#d6ecfa\",\r\n  \"#f15c5c\",\r\n  \"#b84a39\",\r\n  \"#6f3826\",\r\n  \"#f9c00c\",\r\n  \"#00b9f1\",\r\n  \"#7200da\",\r\n  \"#f9320c\",\r\n  \"#fab1ce\",\r\n  \"#f349eb\",\r\n  \"#f100e5\",\r\n  \"#71226e\",\r\n  \"#fab1ce\",\r\n  \"#ffbbd6\",\r\n  \"#f199bc\",\r\n  \"#99f19e\",\r\n  \"#f6ea8c\",\r\n  \"#f26d5b\",\r\n  \"#c03546\",\r\n  \"#492540\",\r\n  \"#a3a1a1\",\r\n  \"#e3dede\",\r\n  \"#8b8687\",\r\n  \"#333030\",\r\n  \"#282c37\",\r\n  \"#9baec8\",\r\n  \"#d9e1e8\",\r\n  \"#2b90d9\",\r\n  \"#a3c9c7\",\r\n  \"#cb7575\",\r\n  \"#ef9e9f\",\r\n  \"#353848\",\r\n  \"#a5d296\",\r\n  \"#8283a7\",\r\n  \"#54546c\",\r\n  \"#404146\",\r\n  \"#ff7473\",\r\n  \"#ffc952\",\r\n  \"#47b8e0\",\r\n  \"#34314c\",\r\n  \"#e1eef6\",\r\n  \"#ff5f2e\",\r\n  \"#fcbe32\",\r\n  \"#004e66\",\r\n  \"#f94e3f\",\r\n  \"#e77e4d\",\r\n  \"#e3632d\",\r\n  \"#6f2108\",\r\n  \"#fffff5\",\r\n  \"#ffda8e\",\r\n  \"#80d4f6\",\r\n  \"#5c196b\",\r\n  \"#7f9eb2\",\r\n  \"#77919d\",\r\n  \"#dae9f4\",\r\n  \"#274c5e\",\r\n  \"#ff7761\",\r\n  \"#fdc23e\",\r\n  \"#f9a11b\",\r\n  \"#274555\",\r\n  \"#fff1b9\",\r\n  \"#5e5e5f\",\r\n  \"#3f4040\",\r\n  \"#272625\",\r\n  \"#eb9f9f\",\r\n  \"#f1bbba\",\r\n  \"#f8ecc9\",\r\n  \"#a79c8e\",\r\n  \"#ede574\",\r\n  \"#f9d423\",\r\n  \"#fc913a\",\r\n  \"#ff4e50\",\r\n  \"#00dffc\",\r\n  \"#008c9e\",\r\n  \"#005f6b\",\r\n  \"#343838\",\r\n  \"#cbe86b\",\r\n  \"#1c140d\",\r\n  \"#f2e9e1\",\r\n  \"#cbe86b\",\r\n  \"#e94e77\",\r\n  \"#d68189\",\r\n  \"#c6a49a\",\r\n  \"#c6e5d9\",\r\n  \"#490a3d\",\r\n  \"#bd1550\",\r\n  \"#e97f02\",\r\n  \"#f8ca00\",\r\n  \"#cff09e\",\r\n  \"#a8dba8\",\r\n  \"#79bd9a\",\r\n  \"#3b8686\",\r\n  \"#fe4365\",\r\n  \"#fc9d9a\",\r\n  \"#f9cdad\",\r\n  \"#c8c8a9\",\r\n  \"#bf209f\",\r\n  \"#d62a9d\",\r\n  \"#ed317f\",\r\n  \"#d64072\",\r\n  \"#f4f7f7\",\r\n  \"#aacfd0\",\r\n  \"#79a8a9\",\r\n  \"#1f4e5f\",\r\n  \"#fec9c9\",\r\n  \"#ee6e9f\",\r\n  \"#6d9d88\",\r\n  \"#1a1a1a\",\r\n  \"#fffcf0\",\r\n  \"#dedcee\",\r\n  \"#6a60a9\",\r\n  \"#fbd14b\",\r\n  \"#cff0da\",\r\n  \"#88dba3\",\r\n  \"#dadbdb\",\r\n  \"#3ac569\",\r\n  \"#8c9184\",\r\n  \"#3a5134\",\r\n  \"#4f953b\",\r\n  \"#a7a7a2\",\r\n  \"#6d819c\",\r\n  \"#e4e7ec\",\r\n  \"#55967e\",\r\n  \"#263959\",\r\n  \"#45d9fd\",\r\n  \"#f4f4f4\",\r\n  \"#ee2560\",\r\n  \"#08182b\",\r\n  \"#f1404b\",\r\n  \"#dddfe6\",\r\n  \"#f4f5f9\",\r\n  \"#252c41\",\r\n  \"#a3daff\",\r\n  \"#1ec0ff\",\r\n  \"#0080ff\",\r\n  \"#03a6ff\",\r\n  \"#d3e0f7\",\r\n  \"#c72e45\",\r\n  \"#a6172d\",\r\n  \"#181842\",\r\n  \"#e85a71\",\r\n  \"#d8e9ef\",\r\n  \"#4ea1d3\",\r\n  \"#454552\",\r\n  \"#fec8c9\",\r\n  \"#fd999a\",\r\n  \"#444f59\",\r\n  \"#3e4149\",\r\n  \"#df405a\",\r\n  \"#87314e\",\r\n  \"#512645\",\r\n  \"#311e3e\",\r\n  \"#f0f5f9\",\r\n  \"#c9d6de\",\r\n  \"#52616a\",\r\n  \"#1e2022\",\r\n];\r\n","import { useState } from 'react'\r\nimport { getRandomColor } from \"./colors\";\r\n\r\nexport const useColorList = (amount: number) => {\r\n  let [list, setList] = useState(() => {\r\n    return Array(amount).fill(0).map(getRandomColor);\r\n  });\r\n  return [list, setList] as const;\r\n};\r\n","import { Observable, Subscriber } from \"rxjs\";\r\n\r\ntype SubscribeInfo = {\r\n  subscriber: Subscriber<number>;\r\n  startTime: number;\r\n};\r\n\r\nlet subscriberInfoList: SubscribeInfo[] = [];\r\nlet isStarted = false;\r\nlet requestId = -1;\r\n\r\nlet tick = () => {\r\n  let list = [...subscriberInfoList];\r\n  let currentTime = Date.now();\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let { subscriber, startTime } = list[i];\r\n    subscriber.next(currentTime - startTime);\r\n  }\r\n\r\n  if (subscriberInfoList.length) {\r\n    requestId = requestAnimationFrame(tick);\r\n  }\r\n};\r\n\r\nlet start = () => {\r\n  if (isStarted) return;\r\n  isStarted = true;\r\n  requestId = requestAnimationFrame(tick);\r\n};\r\n\r\nexport const frame = () =>\r\n  new Observable<number>((subscriber) => {\r\n    let subscriberInfo = {\r\n      subscriber,\r\n      startTime: Date.now(),\r\n    };\r\n    subscriberInfoList.push(subscriberInfo);\r\n    start();\r\n    return () => {\r\n      let index = subscriberInfoList.indexOf(subscriberInfo);\r\n      if (index !== -1) {\r\n        subscriberInfoList.splice(index, 1);\r\n      }\r\n      if (subscriberInfoList.length === 0) {\r\n        isStarted = false\r\n        cancelAnimationFrame(requestId);\r\n      }\r\n    };\r\n  });\r\n","import { frame } from \"./frame\";\r\nimport { map, takeWhile } from \"rxjs/operators\";\r\n\r\n// from 0 to 1\r\nexport function Duration(duration: number) {\r\n  return frame().pipe(\r\n    map((elapsed) => elapsed / duration),\r\n    takeWhile((n) => n <= 1)\r\n  );\r\n}\r\n","export function easeInQuad(t: number) {\r\n  return t * t;\r\n}\r\n\r\nexport function easeOutQuad(t: number) {\r\n  return -t * (t - 2);\r\n}\r\n\r\nexport function easeInOutQuad(t: number) {\r\n  return (t *= 2) < 1 ? t ** 3 / 2 : ((t -= 2) * t * t + 2) / 2;\r\n}\r\n\r\nexport function easeInCubic(t: number) {\r\n  return t ** 3;\r\n}\r\n\r\nexport function easeOutCubic(t: number) {\r\n  return (t = t - 1) * t * t + 1;\r\n}\r\n\r\nexport function easeInOutCubic(t: number) {\r\n  return (t *= 2) < 1 ? t ** 3 / 2 : ((t -= 2) * t * t + 2) / 2;\r\n}\r\n\r\nexport function easeInQuart(t: number) {\r\n  return t ** 4;\r\n}\r\n\r\nexport function easeOutQuart(t: number) {\r\n  return -1 * ((t = t - 1) * t * t * t - 1);\r\n}\r\n\r\nexport function easeInOutQuart(t: number) {\r\n  return (t *= 2) < 1 ? t ** 4 / 2 : ((t -= 2) * t ** 3 - 2) / -2;\r\n}\r\n\r\nexport function easeInQuint(t: number) {\r\n  return t ** 5;\r\n}\r\n\r\nexport function easeOutQuint(t: number) {\r\n  return (t = t - 1) * t ** 4 + 1;\r\n}\r\n\r\nexport function easeInOutQuint(t: number) {\r\n  return (t *= 2) < 1 ? t ** 5 / 2 : ((t -= 2) * t ** 4 + 2) / 2;\r\n}\r\n\r\nexport function easeInSine(t: number) {\r\n  return -1 * Math.cos(t * (Math.PI / 2)) + 1;\r\n}\r\n\r\nexport function easeOutSine(t: number) {\r\n  return Math.sin(t * (Math.PI / 2));\r\n}\r\n\r\nexport function easeInOutSine(t: number) {\r\n  return (Math.cos(Math.PI * t) - 1) / 2;\r\n}\r\n\r\nexport function easeInExpo(t: number) {\r\n  return t === 0 ? 0 : Math.pow(2, 10 * (t - 1));\r\n}\r\n\r\nexport function easeOutExpo(t: number) {\r\n  return t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;\r\n}\r\n\r\nexport function easeInOutExpo(t: number) {\r\n  if (t === 0) return 0;\r\n  if (t === 1) return 1;\r\n  if ((t *= 2) < 1) return Math.pow(2, 10 * (t - 1)) / 2;\r\n  return (-Math.pow(2, -10 * --t) + 2) / 2;\r\n}\r\n\r\nexport function easeInCirc(t: number) {\r\n  return -(Math.sqrt(1 - t * t) - 1);\r\n}\r\n\r\nexport function easeOutCirc(t: number) {\r\n  return Math.sqrt(1 - (t = t - 1) * t);\r\n}\r\n\r\nexport function easeInOutCirc(t: number) {\r\n  if ((t *= 2) < 1) return (Math.sqrt(1 - t * t) - 1) / -2;\r\n  return (Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\r\n}\r\n\r\nconst DOUBLE_PI = 6.283185307179586;\r\nconst ASIN_1 = Math.asin(1);\r\nconst p1 = 0.3;\r\nconst ev1 = (p1 / DOUBLE_PI) * ASIN_1;\r\n\r\nexport function easeInElastic(t: number) {\r\n  if (t === 0) return 0;\r\n  if (t === 1) return 1;\r\n  return (\r\n    -1 * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * 1 - ev1) * DOUBLE_PI) / p1)\r\n  );\r\n}\r\n\r\nconst p2 = 0.3;\r\nconst ev2 = (p2 / DOUBLE_PI) * ASIN_1;\r\n\r\nexport function easeOutElastic(t: number) {\r\n  if (t === 0) return 0;\r\n  if (t === 1) return 1;\r\n  return Math.pow(2, -10 * t) * Math.sin(((t * 1 - ev2) * DOUBLE_PI) / p2) + 1;\r\n}\r\n\r\nconst p3 = 0.45;\r\nconst ev3 = (p3 / DOUBLE_PI) * ASIN_1;\r\n\r\nexport function easeInOutElastic(t: number) {\r\n  if (t === 0) return 0;\r\n  if ((t /= 1 / 2) === 2) return 1;\r\n  let x: number;\r\n  let m: number;\r\n  if (t < 1) {\r\n    x = 1;\r\n    m = 0;\r\n  } else {\r\n    x = -1;\r\n    m = 1;\r\n  }\r\n  t -= 1;\r\n  return (\r\n    (Math.pow(2, x * 10 * t) * Math.sin(((t - ev3) * DOUBLE_PI) / p3)) /\r\n      (x * 2) +\r\n    m\r\n  );\r\n}\r\n\r\nconst s = 1.70158;\r\n\r\nexport function easeInBack(t: number) {\r\n  return t * t * ((s + 1) * t - s);\r\n}\r\n\r\nexport function easeOutBack(t: number) {\r\n  return (t = t - 1) * t * ((s + 1) * t + s) + 1;\r\n}\r\n\r\nexport function easeInOutBack(t: number) {\r\n  const s1 = s * 1.525;\r\n  if ((t *= 2) < 1) {\r\n    return (t * t * ((s1 + 1) * t - s1)) / 2;\r\n  }\r\n  return ((t -= 2) * t * ((s1 + 1) * t + s1) + 2) / 2;\r\n}\r\n\r\nconst step1 = 4 / 11;\r\nconst step2 = 8 / 11;\r\nconst step3 = 10 / 11;\r\nconst a2 = 6 / 11;\r\nconst a3 = 9 / 11;\r\nconst a4 = 21 / 22;\r\nconst acc = 7.5625;\r\n\r\nexport function easeInBounce(t: number) {\r\n  return 1 - easeOutBounce(1 - t);\r\n}\r\n\r\nexport function easeOutBounce(t: number) {\r\n  if (t < step1) {\r\n    return acc * t * t;\r\n  } else if (t < step2) {\r\n    return acc * (t -= a2) * t + 0.75;\r\n  } else if (t < step3) {\r\n    return acc * (t -= a3) * t + 0.9375;\r\n  } else {\r\n    return acc * (t -= a4) * t + 0.984375;\r\n  }\r\n}\r\n\r\nexport function easeInOutBounce(t: number) {\r\n  if (t < 1 / 2) return easeInBounce(t * 2) / 2;\r\n  return easeOutBounce(t) / 2 + 0.5;\r\n}\r\n\r\n/*\r\n *\r\n * TERMS OF USE - EASING EQUATIONS\r\n *\r\n * Open source under the BSD License.\r\n *\r\n * Copyright Â© 2001 Robert Penner\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without modification,\r\n * are permitted provided that the following conditions are met:\r\n *\r\n * Redistributions of source code must retain the above copyright notice, this list of\r\n * conditions and the following disclaimer.\r\n * Redistributions in binary form must reproduce the above copyright notice, this list\r\n * of conditions and the following disclaimer in the documentation and/or other materials\r\n * provided with the distribution.\r\n *\r\n * Neither the name of the author nor the names of contributors may be used to endorse\r\n * or promote products derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\r\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\r\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\r\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED\r\n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\r\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED\r\n * OF THE POSSIBILITY OF SUCH DAMAGE.\r\n *\r\n */\r\n","import { Subject, merge } from \"rxjs\";\r\nimport {\r\n  withLatestFrom,\r\n  map,\r\n  tap,\r\n  takeUntil,\r\n  pairwise,\r\n  switchMap,\r\n  startWith,\r\n  shareReplay,\r\n  publish,\r\n  refCount,\r\n} from \"rxjs/operators\";\r\nimport { Duration } from \"./duration\";\r\nimport * as Easing from \"./easing\";\r\n\r\nexport type EasingFn = (input: number) => number;\r\nexport type EasingType = keyof typeof Easing | EasingFn;\r\n\r\nexport type MovablePosition = {\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\nexport type InteractionPosition = {\r\n  x: number;\r\n  y: number;\r\n} | null;\r\n\r\nexport type AnimateOptions = {\r\n  position: MovablePosition;\r\n  duration: number;\r\n  easing: EasingFn;\r\n};\r\n\r\nexport type MovableInfo = {\r\n  type: string;\r\n  position: MovablePosition;\r\n  interationPosition: InteractionPosition;\r\n  isMoving: boolean;\r\n  isAnimating: boolean;\r\n};\r\n\r\nexport const Movable = (initialPosition: MovablePosition = { x: 0, y: 0 }) => {\r\n  // subjects\r\n  let positionSubject = new Subject<MovablePosition>();\r\n  let interactionPositionSubject = new Subject<InteractionPosition>();\r\n\r\n  let moveToSubject = new Subject<MovablePosition>();\r\n  let animateToSubject = new Subject<AnimateOptions>();\r\n\r\n  let startingSubject = new Subject<MovablePosition>();\r\n  let movingSubject = new Subject<MovablePosition>();\r\n  let endingSubject = new Subject<MovablePosition>();\r\n\r\n  let animationStartSubject = new Subject();\r\n  let animationEndSubject = new Subject();\r\n\r\n  let movementStartSubject = new Subject();\r\n  let movementEndSubject = new Subject();\r\n\r\n  // observables\r\n  let position$ = positionSubject.pipe(\r\n    startWith(initialPosition),\r\n    shareReplay(1)\r\n  );\r\n\r\n  let interactionPosition$ = interactionPositionSubject.pipe(startWith(null));\r\n\r\n  let moveTo$ = moveToSubject.asObservable();\r\n  let animateTo$ = animateToSubject.asObservable();\r\n\r\n  let starting$ = startingSubject.pipe(\r\n    tap<MovablePosition>(movementStartSubject)\r\n  );\r\n  let moving$ = movingSubject.asObservable();\r\n  let ending$ = endingSubject.pipe(tap<MovablePosition>(movementEndSubject));\r\n\r\n  let animationStart$ = animationStartSubject.asObservable();\r\n  let animationEnd$ = animationEndSubject.asObservable();\r\n\r\n  let movementStart$ = movementStartSubject.asObservable();\r\n  let movementEnd$ = movementEndSubject.asObservable();\r\n\r\n  // positions\r\n  let moveToPosition$ = moveTo$.pipe(\r\n    tap<MovablePosition>((position) => {\r\n      positionSubject.next(position);\r\n    })\r\n  );\r\n\r\n  let movingPosition$ = starting$.pipe(\r\n    switchMap((startPosition) => {\r\n      return moving$.pipe(\r\n        takeUntil(ending$),\r\n        startWith(startPosition),\r\n        pairwise(),\r\n        map(([prev, curr]) => {\r\n          return {\r\n            x: curr.x - prev.x,\r\n            y: curr.y - prev.y,\r\n          };\r\n        }),\r\n        withLatestFrom(position$),\r\n        map(([offset, currentPosition]) => {\r\n          let x = currentPosition.x + offset.x;\r\n          let y = currentPosition.y + offset.y;\r\n          return { x, y } as MovablePosition;\r\n        })\r\n      );\r\n    }),\r\n    tap<MovablePosition>((position) => {\r\n      positionSubject.next(position);\r\n    })\r\n  );\r\n\r\n  let animatingPosition$ = animateTo$.pipe(\r\n    withLatestFrom(position$),\r\n    switchMap(([options, prevPosition]) => {\r\n      let startX = prevPosition.x;\r\n      let startY = prevPosition.y;\r\n      let diffX = options.position.x - startX;\r\n      let diffY = options.position.y - startY;\r\n      let isStart = false;\r\n\r\n      return Duration(options.duration).pipe(\r\n        takeUntil(starting$),\r\n        map(options.easing),\r\n        map((currentDuration) => {\r\n          let newPosition: MovablePosition = {\r\n            x: currentDuration * diffX + startX,\r\n            y: currentDuration * diffY + startY,\r\n          };\r\n          return newPosition;\r\n        }),\r\n        tap<MovablePosition>({\r\n          next: () => {\r\n            if (isStart) return;\r\n            isStart = true;\r\n            animationStartSubject.next();\r\n          },\r\n          complete: () => animationEndSubject.next(),\r\n        })\r\n      );\r\n    }),\r\n    tap<MovablePosition>((position) => {\r\n      positionSubject.next(position);\r\n    })\r\n  );\r\n\r\n  let animationStartPosition$ = animationStart$.pipe(\r\n    withLatestFrom(position$),\r\n    map(([_, position]) => position)\r\n  );\r\n\r\n  let animationEndPosition$ = animationEnd$.pipe(\r\n    withLatestFrom(position$),\r\n    map(([_, position]) => position)\r\n  );\r\n\r\n  let movementStartPosition$ = movementStart$.pipe(\r\n    withLatestFrom(position$),\r\n    map(([_, position]) => position)\r\n  );\r\n\r\n  let movementEndPosition$ = movementEnd$.pipe(\r\n    withLatestFrom(position$),\r\n    map(([_, position]) => position)\r\n  );\r\n\r\n  // actions\r\n  let start = (x: number, y: number) => {\r\n    let position = { x, y };\r\n    startingSubject.next(position);\r\n    interactionPositionSubject.next(position);\r\n  };\r\n\r\n  let move = (x: number, y: number) => {\r\n    let position = { x, y };\r\n    movingSubject.next(position);\r\n    interactionPositionSubject.next(position);\r\n  };\r\n\r\n  let end = (x: number = 0, y: number = 0) => {\r\n    let position = { x, y };\r\n    endingSubject.next(position);\r\n    interactionPositionSubject.next(null);\r\n  };\r\n\r\n  let moveTo = (x: number, y: number) => {\r\n    let position = { x, y };\r\n    moveToSubject.next(position);\r\n  };\r\n\r\n  let animateTo = (\r\n    x: number,\r\n    y: number,\r\n    duration: number = 500,\r\n    easing: EasingType = \"easeOutCubic\"\r\n  ) => {\r\n    let position = { x, y };\r\n    let easingFn = typeof easing === \"function\" ? easing : Easing[easing];\r\n    animateToSubject.next({\r\n      position,\r\n      duration,\r\n      easing: easingFn,\r\n    });\r\n  };\r\n\r\n  let actions = {\r\n    start,\r\n    move,\r\n    end,\r\n    moveTo,\r\n    animateTo,\r\n  };\r\n\r\n  // merged state\r\n  let state$ = merge(\r\n    moveToPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"MoveTo\",\r\n          position,\r\n          isMoving: false,\r\n          isAnimating: false,\r\n        };\r\n      })\r\n    ),\r\n    movingPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"Moving\",\r\n          position,\r\n          isMoving: true,\r\n          isAnimating: false,\r\n        };\r\n      })\r\n    ),\r\n    movementStartPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"MovementStart\",\r\n          position,\r\n          isMoving: true,\r\n          isAnimating: false,\r\n        };\r\n      })\r\n    ),\r\n    movementEndPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"MovementEnd\",\r\n          position,\r\n          isMoving: false,\r\n          isAnimating: false,\r\n        };\r\n      })\r\n    ),\r\n    animatingPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"Animating\",\r\n          position,\r\n          isMoving: false,\r\n          isAnimating: true,\r\n        };\r\n      })\r\n    ),\r\n    animationStartPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"AnimationStart\",\r\n          position,\r\n          isMoving: false,\r\n          isAnimating: true,\r\n        };\r\n      })\r\n    ),\r\n    animationEndPosition$.pipe(\r\n      map((position) => {\r\n        return {\r\n          type: \"AnimationEnd\",\r\n          position,\r\n          isMoving: false,\r\n          isAnimating: false,\r\n        };\r\n      })\r\n    )\r\n  ).pipe(\r\n    startWith({\r\n      type: \"Initial\",\r\n      position: initialPosition,\r\n      isMoving: false,\r\n      isAnimating: false,\r\n    }),\r\n    withLatestFrom(interactionPosition$),\r\n    map(([info, interationPosition]) => {\r\n      let result: MovableInfo = {\r\n        ...info,\r\n        interationPosition,\r\n      };\r\n      return result;\r\n    }),\r\n    publish(),\r\n    refCount()\r\n  );\r\n\r\n  // output\r\n  return {\r\n    state$,\r\n    actions,\r\n  };\r\n};\r\n","import { combineLatest } from \"rxjs\";\r\nimport { map, tap, publish, refCount } from \"rxjs/operators\";\r\nimport { Movable, MovablePosition, MovableInfo, EasingType } from \"./Movable\";\r\n\r\nexport type Rect = {\r\n  width: number;\r\n  height: number;\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\nexport type Size = {\r\n  width: number;\r\n  height: number;\r\n};\r\n\r\nexport type LayoutFn = (sizeList: Size[]) => Rect[];\r\n\r\nexport type Margin = {\r\n  top: number;\r\n  bottom: number;\r\n  left: number;\r\n  right: number;\r\n};\r\n\r\nexport type AnimationOptions = {\r\n  disable?: boolean;\r\n  duration?: number;\r\n  easing?: EasingType;\r\n};\r\n\r\nexport type Offset = {\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\nexport type StaticMovableListOptions =\r\n  | {\r\n      mode: \"Horizontal\";\r\n      widthList: number[];\r\n      keyList: string[];\r\n      spacing?: number;\r\n      offset?: Offset;\r\n      animation?: AnimationOptions;\r\n      useExchanged?: boolean;\r\n    }\r\n  | {\r\n      mode: \"Vertical\";\r\n      heightList: number[];\r\n      keyList: string[];\r\n      offset?: Offset;\r\n      spacing?: number;\r\n      animation?: AnimationOptions;\r\n      useExchanged?: boolean;\r\n    }\r\n  | {\r\n      mode: \"Grid\";\r\n      width: number;\r\n      height: number;\r\n      keyList: string[];\r\n      columnCount: number;\r\n      offset?: Offset;\r\n      margin?: Margin;\r\n      animation?: AnimationOptions;\r\n      useExchanged?: boolean;\r\n    }\r\n  | {\r\n      mode: \"Customized\";\r\n      sizeList: Size[];\r\n      keyList: string[];\r\n      layout: LayoutFn;\r\n      offset?: Offset;\r\n      animation?: AnimationOptions;\r\n      useExchanged?: boolean;\r\n    };\r\n\r\nconst createLayout = (options: StaticMovableListOptions): LayoutFn => {\r\n  let mode = options.mode;\r\n\r\n  if (options.mode === \"Horizontal\") {\r\n    return createHorizontalLayout(options.spacing);\r\n  }\r\n\r\n  if (options.mode === \"Vertical\") {\r\n    return createVerticalLayout(options.spacing);\r\n  }\r\n\r\n  if (options.mode === \"Grid\") {\r\n    return createGridLayout(\r\n      options.width,\r\n      options.height,\r\n      options.columnCount,\r\n      options.margin\r\n    );\r\n  }\r\n\r\n  if (options.mode === \"Customized\") {\r\n    return options.layout;\r\n  }\r\n\r\n  throw new Error(`Unsupported mode: ${mode}`);\r\n};\r\n\r\nconst createSizeList = (options: StaticMovableListOptions): Size[] => {\r\n  let mode = options.mode;\r\n\r\n  if (options.mode === \"Horizontal\") {\r\n    return options.widthList.map((width) => {\r\n      return {\r\n        width,\r\n        height: 0,\r\n      };\r\n    });\r\n  }\r\n\r\n  if (options.mode === \"Vertical\") {\r\n    return options.heightList.map((height) => {\r\n      return {\r\n        width: 0,\r\n        height,\r\n      };\r\n    });\r\n  }\r\n\r\n  if (options.mode === \"Grid\") {\r\n    return options.keyList.map(() => {\r\n      return {\r\n        width: options.width,\r\n        height: options.height,\r\n      };\r\n    });\r\n  }\r\n\r\n  if (options.mode === \"Customized\") {\r\n    return options.sizeList;\r\n  }\r\n\r\n  throw new Error(`Unsupported mode: ${mode}`);\r\n};\r\n\r\nconst defaultMargin: Margin = {\r\n  top: 0,\r\n  bottom: 0,\r\n  left: 0,\r\n  right: 0,\r\n};\r\n\r\nconst createHorizontalLayout = (spacing: number = 0): LayoutFn => {\r\n  return (sizeList) => {\r\n    let rectList: Rect[] = [];\r\n    let latestX = 0;\r\n\r\n    for (let i = 0; i < sizeList.length; i++) {\r\n      let item = sizeList[i];\r\n\r\n      let rect: Rect = {\r\n        width: item.width,\r\n        height: item.height,\r\n        x: i === 0 ? 0 : latestX,\r\n        y: 0,\r\n      };\r\n\r\n      latestX += item.width + spacing;\r\n      rectList.push(rect);\r\n    }\r\n\r\n    return rectList;\r\n  };\r\n};\r\n\r\nconst createVerticalLayout = (spacing: number = 0): LayoutFn => {\r\n  return (sizeList) => {\r\n    let rectList: Rect[] = [];\r\n    let latestY = 0;\r\n\r\n    for (let i = 0; i < sizeList.length; i++) {\r\n      let item = sizeList[i];\r\n\r\n      let rect: Rect = {\r\n        width: item.width,\r\n        height: item.height,\r\n        x: 0,\r\n        y: i === 0 ? 0 : latestY,\r\n      };\r\n\r\n      latestY += item.height + spacing;\r\n      rectList.push(rect);\r\n    }\r\n\r\n    return rectList;\r\n  };\r\n};\r\n\r\nconst createGridLayout = (\r\n  width: number,\r\n  height: number,\r\n  columnCount: number,\r\n  margin: Margin = defaultMargin\r\n): LayoutFn => {\r\n  columnCount = Math.floor(columnCount);\r\n\r\n  return (sizeList) => {\r\n    let rectList: Rect[] = [];\r\n\r\n    for (let i = 0; i < sizeList.length; i++) {\r\n      let columnIndex = i % columnCount;\r\n      let rowIndex = Math.floor(i / columnCount);\r\n\r\n      let x = margin.left + columnIndex * width + columnIndex * margin.right;\r\n      let y = margin.top + rowIndex * height + rowIndex * margin.bottom;\r\n\r\n      let rect: Rect = {\r\n        width: width,\r\n        height: height,\r\n        x,\r\n        y,\r\n      };\r\n      rectList.push(rect);\r\n    }\r\n\r\n    return rectList;\r\n  };\r\n};\r\n\r\nconst isEqualRect = (leftRect: Rect, rightRect: Rect) => {\r\n  let isEqualWidth = leftRect.width === rightRect.width;\r\n  let isEqualHeight = leftRect.height === rightRect.height;\r\n  let isEqualX = leftRect.x === rightRect.x;\r\n  let isEqualY = leftRect.y === rightRect.y;\r\n  return isEqualWidth && isEqualHeight && isEqualX && isEqualY;\r\n};\r\n\r\ntype IsEnter = (rect: Rect, position: MovablePosition) => boolean;\r\n\r\nconst isEnterX: IsEnter = (rect, position) => {\r\n  return position.x >= rect.x && position.x <= rect.x + rect.width;\r\n};\r\n\r\nconst isEnterY: IsEnter = (rect, position) => {\r\n  return position.y >= rect.y && position.y <= rect.y + rect.height;\r\n};\r\n\r\nconst isEnterArea: IsEnter = (rect, position) => {\r\n  return isEnterX(rect, position) && isEnterY(rect, position);\r\n};\r\n\r\nconst createEnterPredicateFn = (\r\n  mode: StaticMovableListOptions[\"mode\"]\r\n): IsEnter => {\r\n  if (mode === \"Horizontal\") {\r\n    return isEnterX;\r\n  }\r\n\r\n  if (mode === \"Vertical\") {\r\n    return isEnterY;\r\n  }\r\n\r\n  if (mode === \"Grid\") {\r\n    return isEnterArea;\r\n  }\r\n\r\n  if (mode === \"Customized\") {\r\n    return isEnterArea;\r\n  }\r\n\r\n  throw new Error(`Unsupported mode: ${mode}`);\r\n};\r\n\r\nconst layoutByPosition = (\r\n  layout: LayoutFn,\r\n  isEnter: IsEnter,\r\n  useExchanged: boolean,\r\n  keyList: string[],\r\n  rectList: Rect[],\r\n  activeKey: string,\r\n  position: MovablePosition\r\n) => {\r\n  let enteredIndex = rectList.findIndex((rect) => isEnter(rect, position));\r\n\r\n  if (enteredIndex === -1) {\r\n    return {\r\n      keyList,\r\n      rectList,\r\n    };\r\n  }\r\n\r\n  let enteredKey = keyList[enteredIndex];\r\n\r\n  if (enteredKey === activeKey) {\r\n    return {\r\n      keyList,\r\n      rectList,\r\n    };\r\n  }\r\n\r\n  let activeIndex = keyList.indexOf(activeKey);\r\n\r\n  if (activeIndex === -1) {\r\n    throw new Error(`${activeKey} is not in [${keyList}]`);\r\n  }\r\n\r\n  if (activeIndex === enteredIndex) {\r\n    return {\r\n      keyList,\r\n      rectList,\r\n    };\r\n  }\r\n\r\n  let newKeyList = [...keyList];\r\n\r\n  let newSizeList: Size[] = rectList.map((rect) => {\r\n    return {\r\n      width: rect.width,\r\n      height: rect.height,\r\n    };\r\n  });\r\n\r\n  let activeSize = newSizeList[activeIndex];\r\n  let enteredSize = newSizeList[enteredIndex];\r\n\r\n  if (useExchanged) {\r\n    newKeyList[enteredIndex] = activeKey;\r\n    newKeyList[activeIndex] = enteredKey;\r\n\r\n    newSizeList[enteredIndex] = activeSize;\r\n    newSizeList[activeIndex] = enteredSize;\r\n  } else {\r\n    if (activeIndex > enteredIndex) {\r\n      let targetIndex = Math.max(enteredIndex - 1, 0);\r\n      newKeyList.splice(activeIndex, 1);\r\n      newSizeList.splice(activeIndex, 1);\r\n      newKeyList.splice(targetIndex, 0, activeKey);\r\n      newSizeList.splice(targetIndex, 0, activeSize);\r\n    } else {\r\n      let targetIndex = enteredIndex + 1;\r\n      newKeyList.splice(targetIndex, 0, activeKey);\r\n      newSizeList.splice(targetIndex, 0, activeSize);\r\n      newKeyList.splice(activeIndex, 1);\r\n      newSizeList.splice(activeIndex, 1);\r\n    }\r\n  }\r\n\r\n  let newRectList = layout(newSizeList);\r\n\r\n  return {\r\n    keyList: newKeyList,\r\n    rectList: newRectList,\r\n  };\r\n};\r\n\r\ntype MoverMap = {\r\n  [key: string]: ReturnType<typeof Movable>;\r\n};\r\n\r\nconst createMoverMap = (keyList: string[], rectList: Rect[]): MoverMap => {\r\n  let moverMap: MoverMap = {};\r\n\r\n  for (let i = 0; i < keyList.length; i++) {\r\n    let key = keyList[i];\r\n    let rect = rectList[i];\r\n    let position = {\r\n      x: rect.x,\r\n      y: rect.y,\r\n    };\r\n    let mover = Movable(position);\r\n    moverMap[key] = mover;\r\n  }\r\n\r\n  return moverMap;\r\n};\r\n\r\nexport const StaticMovableList = (options: StaticMovableListOptions) => {\r\n  let layout = createLayout(options);\r\n\r\n  let sizeList = createSizeList(options);\r\n\r\n  let isEnter = createEnterPredicateFn(options.mode);\r\n\r\n  let originKeyList = [...options.keyList];\r\n\r\n  let useExchanged =\r\n    options.useExchanged ??\r\n    (options.mode !== \"Vertical\" && options.mode !== \"Horizontal\");\r\n\r\n  let latestMovableInfoList: MovableInfo[] = [];\r\n\r\n  let animationOptions: AnimationOptions = {\r\n    duration: 500,\r\n    easing: \"easeOutCubic\",\r\n    disable: false,\r\n    ...options.animation,\r\n  };\r\n\r\n  let offset: Offset = {\r\n    x: 0,\r\n    y: 0,\r\n    ...options.offset,\r\n  };\r\n\r\n  let keyList = [...originKeyList];\r\n\r\n  let rectList = layout(sizeList);\r\n\r\n  let moverMap = createMoverMap(keyList, rectList);\r\n\r\n  let moverList = Object.values(moverMap);\r\n\r\n  let getMover = (key: string) => {\r\n    let mover = moverMap[key];\r\n    if (!mover) return null;\r\n    return mover;\r\n  };\r\n\r\n  let start = (key: string, x: number, y: number) => {\r\n    let mover = getMover(key);\r\n    if (!mover) return;\r\n    mover.actions.start(x, y);\r\n  };\r\n\r\n  let move = (key: string, x: number, y: number) => {\r\n    let mover = getMover(key);\r\n    if (!mover) return;\r\n    mover.actions.move(x, y);\r\n  };\r\n\r\n  let end = (key: string, x: number, y: number) => {\r\n    let mover = getMover(key);\r\n    if (!mover) return;\r\n    let rect = rectList[keyList.indexOf(key)];\r\n    mover.actions.end(x, y);\r\n    mover.actions.animateTo(rect.x, rect.y);\r\n  };\r\n\r\n  let animateTo = (\r\n    key: string,\r\n    x: number,\r\n    y: number,\r\n    duration: number = 300,\r\n    easing: EasingType = \"easeOutCubic\"\r\n  ) => {\r\n    let mover = getMover(key);\r\n    if (!mover) return;\r\n    mover.actions.animateTo(x, y, duration, easing);\r\n  };\r\n\r\n  let moveTo = (key: string, x: number, y: number) => {\r\n    let mover = getMover(key);\r\n    if (!mover) return;\r\n    mover.actions.moveTo(x, y);\r\n  };\r\n\r\n  let getCurrentRect = (key: string) => {\r\n    let index = keyList.indexOf(key);\r\n    if (index === -1) return;\r\n    return rectList[index];\r\n  };\r\n\r\n  let getActiveInfo = (x: number, y: number) => {\r\n    if (!latestMovableInfoList.length) return null;\r\n\r\n    let targetPosition = {\r\n      x: x - offset.x,\r\n      y: y - offset.y,\r\n    };\r\n\r\n    let targetIndex = -1;\r\n    let targetInfo: MovableInfo | null = null;\r\n\r\n    for (let i = 0; i < latestMovableInfoList.length; i++) {\r\n      let info = latestMovableInfoList[i];\r\n      let currentPosition = info.position;\r\n      let { width, height } = rectList[i];\r\n      let currentRect = {\r\n        width,\r\n        height,\r\n        x: currentPosition.x,\r\n        y: currentPosition.y,\r\n      };\r\n\r\n      if (!isEnter(currentRect, targetPosition)) continue;\r\n\r\n      if (!targetInfo || info.isAnimating) {\r\n        targetInfo = info;\r\n        targetIndex = i;\r\n      }\r\n    }\r\n\r\n    if (targetIndex === -1) return null;\r\n\r\n    let key = keyList[targetIndex];\r\n    let rect = rectList[targetIndex];\r\n\r\n    return {\r\n      key,\r\n      index: targetIndex,\r\n      info: targetInfo,\r\n      rect,\r\n    };\r\n  };\r\n\r\n  let actions = {\r\n    start,\r\n    move,\r\n    end,\r\n    moveTo,\r\n    animateTo,\r\n    getCurrentRect,\r\n    getActiveInfo,\r\n  };\r\n\r\n  let state$ = combineLatest(moverList.map((item) => item.state$)).pipe(\r\n    map((movableInfoList) => {\r\n      return movableInfoList.map((info, index) => {\r\n        let key = originKeyList[index];\r\n        return {\r\n          info,\r\n          size: sizeList[index],\r\n          key,\r\n        };\r\n      });\r\n    }),\r\n    tap((list) => {\r\n      let activeItem = list.find((item) => item.info.isMoving);\r\n\r\n      if (!activeItem || !activeItem.info.interationPosition) return;\r\n\r\n      let activeKey = activeItem.key;\r\n      let interationPosition = activeItem.info.interationPosition;\r\n\r\n      let position = {\r\n        x: interationPosition.x - offset.x,\r\n        y: interationPosition.y - offset.y,\r\n      };\r\n\r\n      let layoutInfo = layoutByPosition(\r\n        layout,\r\n        isEnter,\r\n        useExchanged,\r\n        keyList,\r\n        rectList,\r\n        activeKey,\r\n        position\r\n      );\r\n\r\n      let newKeyList = layoutInfo.keyList;\r\n      let newRectList = layoutInfo.rectList;\r\n\r\n      let oldKeyList = keyList;\r\n      let oldRectList = rectList;\r\n\r\n      if (newKeyList === oldKeyList && newRectList === oldRectList) return;\r\n\r\n      keyList = newKeyList;\r\n      rectList = newRectList;\r\n\r\n      for (let i = 0; i < newKeyList.length; i++) {\r\n        let key = newKeyList[i];\r\n\r\n        if (key === activeKey) continue;\r\n\r\n        let newRect = newRectList[i];\r\n        let oldRect = oldRectList[oldKeyList.indexOf(key)];\r\n\r\n        let isEqual = isEqualRect(newRect, oldRect);\r\n\r\n        if (isEqual) continue;\r\n\r\n        if (animationOptions.disable) {\r\n          moveTo(key, newRect.x, newRect.y);\r\n        } else {\r\n          animateTo(\r\n            key,\r\n            newRect.x,\r\n            newRect.y,\r\n            animationOptions.duration,\r\n            animationOptions.easing\r\n          );\r\n        }\r\n      }\r\n    }),\r\n    map((list) => {\r\n      let sortedList: typeof list = Array(list.length);\r\n\r\n      for (let i = 0; i < list.length; i++) {\r\n        let item = list[i];\r\n        let targetIndex = keyList.indexOf(item.key);\r\n        sortedList[targetIndex] = item;\r\n        latestMovableInfoList[targetIndex] = item.info;\r\n      }\r\n\r\n      return sortedList;\r\n    }),\r\n    publish(),\r\n    refCount()\r\n  );\r\n\r\n  return {\r\n    state$,\r\n    actions,\r\n  };\r\n};\r\n","export type CreateDraggableOptions = {\r\n  onStart(x: number, y: number): void;\r\n  onMove(x: number, y: number): void;\r\n  onEnd(x: number, y: number): void;\r\n};\r\n\r\nexport const createDragable = (\r\n  elem: HTMLElement,\r\n  options: CreateDraggableOptions\r\n) => {\r\n  let handleMouseDown = (event: MouseEvent) => {\r\n    let handleMouseMove = (event: MouseEvent) => {\r\n      options.onMove(event.pageX, event.pageY);\r\n    };\r\n\r\n    let handleMouseUp = (event: MouseEvent) => {\r\n      options.onEnd(event.pageX, event.pageY);\r\n      document.removeEventListener(\"mousemove\", handleMouseMove, false);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp, false);\r\n    };\r\n\r\n    document.addEventListener(\"mousemove\", handleMouseMove, false);\r\n    document.addEventListener(\"mouseup\", handleMouseUp, false);\r\n\r\n    options.onStart(event.pageX, event.pageY);\r\n  };\r\n\r\n  let handleTouchStart = (event: TouchEvent) => {\r\n    if (event.cancelable) {\r\n      event.preventDefault();\r\n    }\r\n    let touchEvent = event.touches[0];\r\n    // fix: touchend event may not have touches\r\n    let latestTouch: Touch | null = null;\r\n\r\n    let handleTouchMove = (event: TouchEvent) => {\r\n      let touch = event.touches[0];\r\n\r\n      latestTouch = touch;\r\n      options.onMove(touch.pageX, touch.pageY);\r\n    };\r\n\r\n    let handleTouchEnd = (event: TouchEvent) => {\r\n      let touch = event.touches[0] ?? latestTouch;\r\n\r\n      document.removeEventListener(\"touchmove\", handleTouchMove, false);\r\n      document.removeEventListener(\"touchend\", handleTouchEnd, false);\r\n\r\n      options.onEnd(touch?.pageX ?? 0, touch?.pageY ?? 0);\r\n    };\r\n\r\n    document.addEventListener(\"touchmove\", handleTouchMove, false);\r\n    document.addEventListener(\"touchend\", handleTouchEnd, false);\r\n\r\n    options.onStart(touchEvent.pageX, touchEvent.pageY);\r\n  };\r\n\r\n  let listen = () => {\r\n    elem.addEventListener(\"mousedown\", handleMouseDown, false);\r\n    elem.addEventListener(\"touchstart\", handleTouchStart, false);\r\n  };\r\n\r\n  let unlisten = () => {\r\n    elem.removeEventListener(\"mousedown\", handleMouseDown, false);\r\n    elem.removeEventListener(\"touchstart\", handleTouchStart, false);\r\n  };\r\n\r\n  return {\r\n    listen,\r\n    unlisten,\r\n  };\r\n};\r\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { useColorList } from \"../hooks/useColorList\";\r\nimport { StaticMovableList } from \"../rxjs-animation/MovableList\";\r\nimport { createDragable } from \"../rxjs-animation/DOM\";\r\n\r\nexport function VerticalDemo() {\r\n  let containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  let [colorList, _] = useColorList(12);\r\n\r\n  let heightList = useMemo(() => {\r\n    return colorList.map(() => Math.floor(50 + 50 * Math.random()));\r\n  }, [colorList]);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    let container = containerRef.current;\r\n    let containerRect = container.getBoundingClientRect();\r\n    let keyList = heightList.map((_, index) => index.toString());\r\n    let offset = {\r\n      x: containerRect.x,\r\n      y: containerRect.y,\r\n    };\r\n\r\n    let movableList = StaticMovableList({\r\n      mode: \"Vertical\",\r\n      heightList,\r\n      keyList,\r\n      offset,\r\n      spacing: 5,\r\n    });\r\n\r\n    let subscription = movableList.state$.subscribe((list) => {\r\n      for (let i = 0; i < list.length; i++) {\r\n        let item = list[i];\r\n        let child = container.children[Number(item.key)] as HTMLDivElement;\r\n        if (item.info.isMoving) {\r\n          child.style.zIndex = \"3\";\r\n        } else if (item.info.isAnimating) {\r\n          child.style.zIndex = \"2\";\r\n        } else {\r\n          child.style.zIndex = \"1\";\r\n        }\r\n        child.style.display = \"\";\r\n        child.style.transform = `translate3d(0, ${item.info.position.y}px, 0)`;\r\n      }\r\n    });\r\n\r\n    let handlers: ReturnType<typeof createDragable>[] = [];\r\n\r\n    for (let i = 0; i < container.children.length; i++) {\r\n      let child = container.children[i] as HTMLDivElement;\r\n      let key = i.toString();\r\n      let handler = createDragable(child, {\r\n        onStart(x, y) {\r\n          movableList.actions.start(key, x, y);\r\n        },\r\n        onMove(x, y) {\r\n          movableList.actions.move(key, x, y);\r\n        },\r\n        onEnd(x, y) {\r\n          movableList.actions.end(key, x, y);\r\n        },\r\n      });\r\n      handler.listen();\r\n      handlers.push(handler);\r\n    }\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      handlers.forEach((handler) => handler.unlisten());\r\n    };\r\n  }, [colorList, heightList, containerRef]);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: \"relative\" }}>\r\n      {colorList.map((color, index) => {\r\n        let height = heightList[index];\r\n        let style: React.CSSProperties = {\r\n          display: \"none\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          width: \"100%\",\r\n          height: height,\r\n          lineHeight: `${height}px`,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n          background: color,\r\n          userSelect: \"none\",\r\n        };\r\n        return (\r\n          <div key={index} style={style}>\r\n            {index}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { useColorList } from \"../hooks/useColorList\";\r\nimport { StaticMovableList } from \"../rxjs-animation/MovableList\";\r\nimport { createDragable } from \"../rxjs-animation/DOM\";\r\n\r\nexport function HorizontalDemo() {\r\n  let containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  let [colorList, _] = useColorList(12);\r\n\r\n  let widthList = useMemo(() => {\r\n    return colorList.map(() => Math.floor(50 + 50 * Math.random()));\r\n  }, [colorList]);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    let container = containerRef.current;\r\n    let containerRect = container.getBoundingClientRect();\r\n    let keyList = widthList.map((_, index) => index.toString());\r\n\r\n    let offset = {\r\n      x: containerRect.x,\r\n      y: containerRect.y,\r\n    };\r\n\r\n    let movableList = StaticMovableList({\r\n      mode: \"Horizontal\",\r\n      widthList,\r\n      keyList,\r\n      offset,\r\n      spacing: 5,\r\n    });\r\n\r\n    let subscription = movableList.state$.subscribe((list) => {\r\n      for (let i = 0; i < list.length; i++) {\r\n        let item = list[i];\r\n        let child = container.children[Number(item.key)] as HTMLDivElement;\r\n        if (item.info.isMoving) {\r\n          child.style.zIndex = \"3\";\r\n        } else if (item.info.isAnimating) {\r\n          child.style.zIndex = \"2\";\r\n        } else {\r\n          child.style.zIndex = \"1\";\r\n        }\r\n        child.style.display = \"\";\r\n        child.style.transform = `translate3d(${item.info.position.x}px, 0, 0)`;\r\n      }\r\n    });\r\n\r\n    let handlers: ReturnType<typeof createDragable>[] = [];\r\n\r\n    for (let i = 0; i < container.children.length; i++) {\r\n      let child = container.children[i] as HTMLDivElement;\r\n      let key = i.toString();\r\n      let handler = createDragable(child, {\r\n        onStart(x, y) {\r\n          movableList.actions.start(key, x, y);\r\n        },\r\n        onMove(x, y) {\r\n          movableList.actions.move(key, x, y);\r\n        },\r\n        onEnd(x, y) {\r\n          movableList.actions.end(key, x, y);\r\n        },\r\n      });\r\n      handler.listen();\r\n      handlers.push(handler);\r\n    }\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      handlers.forEach((handler) => handler.unlisten());\r\n    };\r\n  }, [colorList, widthList, containerRef]);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: \"relative\" }}>\r\n      {colorList.map((color, index) => {\r\n        let width = widthList[index];\r\n        let style: React.CSSProperties = {\r\n          display: \"none\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          width: width,\r\n          height: 400,\r\n          lineHeight: `${400}px`,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n          background: color,\r\n          userSelect: \"none\",\r\n        };\r\n        return (\r\n          <div key={index} style={style}>\r\n            {index}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { useColorList } from \"../hooks/useColorList\";\r\nimport { StaticMovableList } from \"../rxjs-animation/MovableList\";\r\nimport { createDragable } from \"../rxjs-animation/DOM\";\r\n\r\nexport function GridDemo() {\r\n  let containerRef = useRef<HTMLDivElement>(null);\r\n  let [colorList, setColorList] = useColorList(100);\r\n\r\n  let size = useMemo(() => {\r\n    return {\r\n      width: Math.floor(50 + 50 * Math.random()),\r\n      height: Math.floor(50 + 50 * Math.random()),\r\n    };\r\n  }, [colorList]);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    let container = containerRef.current;\r\n    let containerRect = container.getBoundingClientRect();\r\n    let keyList = colorList.map((_, index) => index.toString());\r\n\r\n    let offset = {\r\n      x: containerRect.x,\r\n      y: containerRect.y,\r\n    };\r\n\r\n    let movableList = StaticMovableList({\r\n      mode: \"Grid\",\r\n      width: size.width,\r\n      height: size.height,\r\n      columnCount: 10,\r\n      keyList,\r\n      offset,\r\n      animation: {\r\n        disable: false,\r\n      },\r\n      margin: {\r\n        top: 5,\r\n        left: 5,\r\n        right: 5,\r\n        bottom: 5,\r\n      },\r\n    });\r\n\r\n    let children = Array.from(container.children);\r\n\r\n    let subscription = movableList.state$.subscribe((list) => {\r\n      for (let i = 0; i < list.length; i++) {\r\n        let item = list[i];\r\n        let child = children[Number(item.key)] as HTMLDivElement;\r\n        if (item.info.isMoving) {\r\n          child.style.zIndex = \"3\";\r\n        } else if (item.info.isAnimating) {\r\n          child.style.zIndex = \"2\";\r\n        } else {\r\n          child.style.zIndex = \"1\";\r\n        }\r\n        child.style.display = \"\";\r\n        child.style.transform = `translate3d(${item.info.position.x}px, ${item.info.position.y}px, 0)`;\r\n      }\r\n    });\r\n\r\n    let handlers: ReturnType<typeof createDragable>[] = [];\r\n\r\n    for (let i = 0; i < container.children.length; i++) {\r\n      let child = container.children[i] as HTMLDivElement;\r\n      let key = i.toString();\r\n      let handler = createDragable(child, {\r\n        onStart(x, y) {\r\n          movableList.actions.start(key, x, y);\r\n        },\r\n        onMove(x, y) {\r\n          movableList.actions.move(key, x, y);\r\n        },\r\n        onEnd(x, y) {\r\n          movableList.actions.end(key, x, y);\r\n        },\r\n      });\r\n      handler.listen();\r\n      handlers.push(handler);\r\n    }\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      handlers.forEach((handler) => handler.unlisten());\r\n    };\r\n  }, [colorList, size, containerRef]);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: \"relative\" }}>\r\n      {colorList.map((color, index) => {\r\n        let style: React.CSSProperties = {\r\n          display: \"none\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n          width: size.width,\r\n          height: size.height,\r\n          lineHeight: `${size.height}px`,\r\n          textAlign: \"center\",\r\n          color: \"white\",\r\n          background: color,\r\n          userSelect: \"none\",\r\n        };\r\n        return (\r\n          <div key={index} style={style}>\r\n            {index}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useRef } from \"react\";\r\nimport { useColorList } from \"../hooks/useColorList\";\r\nimport { MovableInfo } from \"../rxjs-animation/Movable\";\r\nimport { StaticMovableList, Rect, Size } from \"../rxjs-animation/MovableList\";\r\nimport { createDragable } from \"../rxjs-animation/DOM\";\r\n\r\nconst renderRect = (\r\n  ctx: CanvasRenderingContext2D,\r\n  color: string,\r\n  rect: Rect\r\n) => {\r\n  ctx.fillStyle = color;\r\n  ctx.fillRect(rect.x, rect.y, rect.width, rect.height);\r\n};\r\n\r\nexport function CanvasDemo() {\r\n  let containerRef = useRef<HTMLDivElement>(null);\r\n  let canvasRef = useRef<HTMLCanvasElement>(null);\r\n  let [colorList, setColorList] = useColorList(100);\r\n\r\n  let size = useMemo(() => {\r\n    return {\r\n      width: Math.floor(50 + 50 * Math.random()),\r\n      height: Math.floor(50 + 50 * Math.random()),\r\n    };\r\n  }, [colorList]);\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current || !canvasRef.current) return;\r\n\r\n    let container = containerRef.current;\r\n    let canvas = canvasRef.current;\r\n    let ctx = canvas.getContext(\"2d\");\r\n    let containerRect = container.getBoundingClientRect();\r\n    let keyList = colorList.map((_, index) => index.toString());\r\n\r\n    if (!ctx) return;\r\n\r\n    let offset = {\r\n      x: containerRect.x,\r\n      y: containerRect.y,\r\n    };\r\n\r\n    let movableList = StaticMovableList({\r\n      mode: \"Grid\",\r\n      width: size.width,\r\n      height: size.height,\r\n      columnCount: 10,\r\n      keyList,\r\n      offset,\r\n      animation: {\r\n        disable: false,\r\n      },\r\n      margin: {\r\n        top: 5,\r\n        left: 5,\r\n        right: 5,\r\n        bottom: 5,\r\n      },\r\n    });\r\n\r\n    type Item = {\r\n      info: MovableInfo;\r\n      key: string;\r\n      size: Size;\r\n    };\r\n\r\n    let renderItem = (item: Item) => {\r\n      if (!ctx) return;\r\n      let rect: Rect = {\r\n        width: item.size.width,\r\n        height: item.size.height,\r\n        x: item.info.position.x,\r\n        y: item.info.position.y,\r\n      };\r\n      renderRect(ctx, colorList[Number(item.key)], rect);\r\n    };\r\n\r\n    let subscription = movableList.state$.subscribe((list) => {\r\n      let movingItem: Item | null = null;\r\n\r\n      let animatingItems: Item[] = [];\r\n\r\n      ctx?.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      for (let i = 0; i < list.length; i++) {\r\n        let item = list[i];\r\n\r\n        if (item.info.isMoving) {\r\n          movingItem = item;\r\n        } else if (item.info.isAnimating) {\r\n          animatingItems.push(item);\r\n        } else if (ctx) {\r\n          renderItem(item);\r\n        }\r\n      }\r\n\r\n      for (let i = 0; i < animatingItems.length; i++) {\r\n        renderItem(animatingItems[i]);\r\n      }\r\n\r\n      if (movingItem && ctx) {\r\n        renderItem(movingItem);\r\n      }\r\n    });\r\n\r\n    let currentKey = \"\";\r\n\r\n    let handler = createDragable(canvas, {\r\n      onStart(x, y) {\r\n        let activeInfo = movableList.actions.getActiveInfo(x, y);\r\n        if (!activeInfo) return;\r\n        currentKey = activeInfo.key;\r\n        movableList.actions.start(currentKey, x, y);\r\n      },\r\n      onMove(x, y) {\r\n        movableList.actions.move(currentKey, x, y);\r\n      },\r\n      onEnd(x, y) {\r\n        movableList.actions.end(currentKey, x, y);\r\n      },\r\n    });\r\n\r\n    handler.listen();\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      handler.unlisten();\r\n    };\r\n  }, [colorList, size, containerRef]);\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: \"relative\" }}>\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={window.innerWidth}\r\n        height={window.innerHeight - 100}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport { VerticalDemo } from \"./demos/Vertical\";\nimport { HorizontalDemo } from \"./demos/Horizontal\";\nimport { GridDemo } from \"./demos/Grid\";\nimport { CanvasDemo } from \"./demos/Canvas\";\n\nconst modeList: string[] = [\n  \"Vertical\",\n  \"Horizontal\",\n  \"Grid\",\n  \"Canvas\"\n];\n\nconst App = () => {\n  let [currentMode, setMode] = useState(\"Vertical\");\n\n  return (\n    <div>\n      <div style={{ textAlign: \"center\", paddingTop: 10, paddingBottom: 10 }}>\n        {modeList.map((mode) => {\n          let style = {\n            color: currentMode !== mode ? \"blue\" : void 0,\n          };\n          let handleClick = () => {\n            setMode(mode);\n          };\n          return (\n            <React.Fragment key={mode}>\n              <span style={style} onClick={handleClick}>\n                {mode}\n              </span>{\" \"}\n            </React.Fragment>\n          );\n        })}\n      </div>\n      {currentMode === \"Vertical\" && <VerticalDemo />}\n      {currentMode === \"Horizontal\" && <HorizontalDemo />}\n      {currentMode === \"Grid\" && <GridDemo />}\n      {currentMode === \"Canvas\" && <CanvasDemo />}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}